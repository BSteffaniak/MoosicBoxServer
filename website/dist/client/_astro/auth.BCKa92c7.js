import{c as s,l as d,g as u,i as f,e as p,b as h,t as k,S as w}from"./web.o2PnP_jd.js";import{f as l,a as v,d as C,g as P,s as T}from"./api.DZqBGp_p.js";var I=k("<div>");function U(){const t=l("magicToken"),n=l("apiUrl"),[g,a]=s(!0),[o,r]=s();function i(e){const m=C.get()?.id??P();T(m,e)}return d(async()=>{if(!t){a(!1),r("No magic token");return}n&&i({apiUrl:n});const e=await v.magicToken(t);a(!1),e?(i({clientId:e.clientId,token:e.accessToken}),window.location.href="/"):r("Failed to authenticate with magic token")}),(()=>{var e=u(I);return f(e,(()=>{var c=p(()=>!!g());return()=>c()?"Loading...":h(w,{get when(){return o()},get children(){return o()}})})()),e})()}export{U as default};
//# sourceMappingURL=auth.BCKa92c7.js.map
