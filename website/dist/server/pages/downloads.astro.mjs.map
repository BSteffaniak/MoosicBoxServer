{"version":3,"file":"downloads.astro.mjs","sources":["../../../src/pages/downloads.astro"],"sourcesContent":["---\nimport '~/components/DownloadQueue/downloads.css';\nimport Layout from '~/layouts/Layout.astro';\nimport DownloadQueue from '~/components/DownloadQueue/DownloadQueue';\n\nconst search = Object.fromEntries(new URLSearchParams(Astro.url.searchParams));\n---\n\n<Layout title=\"MoosicBox\">\n    <div class=\"downloads-page\">\n        <div class=\"downloads-header-text-container\">\n            <h1 class=\"downloads-header-text\">Downloads</h1>\n        </div>\n        <download-tabs class=\"downloads-page-tabs\" query-param=\"tab\">\n            <download-tab\n                default\n                for=\"QUEUED\"\n                class={`downloads-page-tabs-queued-tab${search.tab === 'QUEUED' ? ' active' : ''}`}\n            >\n                Queued\n            </download-tab>\n            <download-tab\n                for=\"HISTORY\"\n                class={`downloads-page-tabs-history-tab${search.tab === 'HISTORY' ? ' active' : ''}`}\n            >\n                History\n            </download-tab>\n\n            <tab-content\n                value=\"QUEUED\"\n                class={`downloads-page-queued-downloads${search.tab === 'QUEUED' ? ' active' : ''}`}\n            >\n                <DownloadQueue state=\"QUEUED\" client:only />\n            </tab-content>\n            <tab-content\n                value=\"HISTORY\"\n                class={`downloads-page-history-downloads${search.tab === 'HISTORY' ? ' active' : ''}`}\n            >\n                <DownloadQueue state=\"HISTORY\" client:only />\n            </tab-content>\n        </download-tabs>\n    </div>\n</Layout>\n\n<style>\n    tab-content {\n        display: none;\n    }\n\n    tab-content.active {\n        display: block;\n    }\n\n    download-tab {\n        background-color: #333;\n        border-top-left-radius: 10px;\n        border-top-right-radius: 10px;\n        cursor: pointer;\n        padding: 10px;\n        margin-right: 5px;\n        display: inline-block;\n    }\n\n    .downloads-page-tabs tab-content {\n        background-color: #333;\n    }\n</style>\n\n<script>\n    import { setQueryParam, getQueryParam } from '~/services/util';\n\n    class Tabs extends HTMLElement {\n        constructor() {\n            super();\n\n            const queryParam = this.getAttribute('query-param');\n            const tabs = [...this.querySelectorAll('download-tab')];\n            const tabContents = [...this.querySelectorAll('tab-content')];\n\n            function activateTab(tab: Tab) {\n                const value = tab.getAttribute('for');\n\n                tabs.filter((x) => x !== tab).forEach((x) =>\n                    x.classList.toggle('active', false),\n                );\n\n                tab.classList.toggle('active', true);\n\n                if (value) {\n                    if (queryParam && getQueryParam(queryParam) !== value) {\n                        setQueryParam(queryParam, value);\n                    }\n\n                    const content = tabContents.find(\n                        (x) => x.getAttribute('value') === value,\n                    );\n\n                    tabContents\n                        .filter((x) => x !== content)\n                        .forEach((x) => x.classList.toggle('active', false));\n\n                    content?.classList.toggle('active', true);\n                }\n            }\n\n            const queryParamValue = queryParam && getQueryParam(queryParam);\n\n            tabs.forEach((tab) => {\n                tab.addEventListener('click', () => {\n                    activateTab(tab as Tab);\n                });\n\n                if (queryParam) {\n                    if (\n                        queryParamValue &&\n                        tab.getAttribute('for') === queryParamValue\n                    ) {\n                        activateTab(tab as Tab);\n                    } else {\n                        const isDefault = tab.hasAttribute('default');\n\n                        if (isDefault && !queryParamValue) {\n                            activateTab(tab as Tab);\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n    customElements.define('download-tabs', Tabs);\n\n    class Tab extends HTMLElement {\n        constructor() {\n            super();\n        }\n    }\n\n    customElements.define('download-tab', Tab);\n</script>\n"],"names":["$$createAstro","$$createComponent","Astro","$$render","$$renderComponent","Layout","$$result","$$maybeRenderHead"],"mappings":";;;;;AAAA,MAAA,UAAAA,WAAA,EAAA,CAAA;AAAA,MAAA,WAAA,GAAAC,eAAA,CAAA,CAAA,QAAA,EAAA,SAAA,OAAA,KAAA;AAAA,EAAA,MAAAC,MAAA,GAAA,QAAA,CAAA,WAAA,CAAA,OAAA,EAAA,SAAA,OAAA,CAAA,CAAA;AAAA,EAAAA,OAAA,IAAA,GAAA,WAAA,CAAA;AAKA,EAAM,MAAA,MAAA,GAAS,OAAO,WAAY,CAAA,IAAI,gBAAgBA,MAAM,CAAA,GAAA,CAAI,YAAY,CAAC,CAAA,CAAA;AAL7E,EAAA,OAAAC,cAAA,CAAA,EAAAC,eAAA,CAAA,QAAA,EAAA,QAAA,EAAAC,QAAA,EAAA,EAQQ,OAAA,EAAO,WARf,EAAA,yBAAA,EAAA,IAAA,EAAA,EAAA,EAAA,SAAA,EAAA,CAAAC,SAAAA,KAAAH,cAAA,CAAA,CAAA,EAAAI,eAAA,CAAA,CAAA,CAAA,2MAAA,EAAAH,eAAA,CAAAE,SAAA,EAAA,eAAA,EAAA,eAAA,EAAA,EAauB,OAAO,EAAA,qBAAA,EAAqB,aAAa,EAAA,KAAA,EAbhE,2BAAA,IAAA,EAAA,EAAA,EAAA,SAAA,EAAA,MAAAH,cAAA,CAAA,CAAA,EAAAC,eAAAE,CAAAA,SAAAA,EAAA,cAAA,EAAA,cAAA,EAAA,EAegB,SAAA,EAAA,IACA,EAAA,KAAA,EAAK,QACL,EAAA,OAAA,EAAO,CAAA,8BAAA,EAAA,MAAA,CAAA,GAAA,KAAA,QAAA,GAAA,SAAA,GAAA,EAAA,CAjBvB,CAAA,EAAA,yBAAA,EAAA,IAAA,EAAA,EAAA,EAAA,SAAA,EAAA,MAAAH,cAAA,CAAA;;GAoBc,CAAA,IApBdC,eAAAE,CAAAA,SAAAA,EAAA,gBAAA,cAAA,EAAA,EAsBgB,KAAK,EAAA,SAAA,EACL,OAAO,EAAA,CAAA,+BAAA,EAAA,OAAA,GAAA,KAAA,SAAA,GAAA,YAAA,EAAA,CAAA,CAAA,EAvBvB,2BAAA,IAAA,EAAA,EAAA,EAAA,SAAA,EAAA,MAAAH,cAAA,CAAA;;GA0Bc,CAAA,IA1BdC,eAAAE,CAAAA,SAAAA,EAAA,eAAA,aAAA,EAAA,EA6BgB,SAAO,QACP,EAAA,OAAA,EAAO,kCAAA,MAAA,CAAA,GAAA,KAAA,WAAA,SAAA,GAAA,EAAA,IA9BvB,yBAAA,EAAA,IAAA,EAAA,EAAA,EAAA,SAAA,EAAA,MAAAH,kBAAAC,eAAAE,CAAAA,SAAAA,EAAA,iBAAA,IAAA,EAAA,EAgC+B,SAAO,QAAQ,EAAA,aAAA,EAAA,MAhC9C,4BAAA,EAAA,MAAA,EAAA,2BAAA,IAAA,EAAA,uBAAA,EAAA,4CAAA,yBAAA,EAAA,SAAA,EAgCiB,CAAA,CAAA,CAAA,CAAA,EACH,CAAA,CAjCd,CAAA,EAAAF,eAAA,CAAAE,WAAA,aAAA,EAAA,aAAA,EAAA,EAmCgB,OAAO,EAAA,SAAA,EACP,SAAO,CAAA,gCAAA,EAAA,MAAA,CAAA,QAAA,SAAA,GAAA,SAAA,GAAA,EAAA,CApCvB,CAAA,EAAA,yBAAA,EAAA,MAAA,EAAA,EAAA,WAAA,MAAAH,cAAA,CAAA,CAAA,EAAAC,eAAAE,CAAAA,SAAAA,EAAA,eAAA,EAAA,IAAA,EAAA,EAsC+B,OAAO,EAAA,SAAA,EAAS,eAAA,IAtC/C,EAAA,4BAAA,EAAA,QAAA,yBAAA,EAAA,IAAA,EAAA,yBAAA,0CAAA,EAAA,yBAAA,EAAA,WAsCiB,CAAA,KACH,CAAA,KACJ,CAAA,CAxCV,QAAA,CAAA,EA0CE,CAAA,CAAA,EAAA,CAAA,CAAA;AA1CF,CAAA,EAAA,kEAAA,KAAA,CAAA,CAAA,CAAA;;;;;;;;;;;;;;;;"}